<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
C:\Projects\WoW\Bin\Interface\FrameXML\UI.xsd">
	<Script file="MoveAnything.lua"/>

	<Button name="GameMenuButtonMoveAnything" parent="GameMenuFrame" inherits="GameMenuButtonTemplate" text="MoveAnything!">
		<Scripts>
			<OnLoad>
				this:ClearAllPoints()
				this:SetPoint("TOP", GameMenuButtonContinue, "BOTTOM", 0, -25)
			</OnLoad>
			<OnClick>
				if IsShiftKeyDown() and IsControlKeyDown() and IsAltKeyDown() then
					ReloadUI()
				else
					ShowUIPanel(MAOptions)
					HideUIPanel(GameMenuFrame)
				end
			</OnClick>
		</Scripts>
	</Button>
	<Button name="ResizingButton" virtual="true">
		<Size>
			<AbsDimension x="8" y="8"/>
		</Size>
		<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
			<EdgeSize>
				<AbsValue val="4"/>
			</EdgeSize>
			<TileSize>
				<AbsValue val="8"/>
			</TileSize>
			<BackgroundInsets>
				<AbsInset left="2" right="2" top="2" bottom="2"/>
			</BackgroundInsets>
		</Backdrop>
		<Scripts>
			<OnLoad>
				local anchorto, anchor = MovAny:SizingAnchor( this )
				this:SetPoint( anchor, this:GetParent(), anchorto, 0, 0 )
			</OnLoad>
			<OnShow>
				this:SetFrameLevel(this:GetParent():GetFrameLevel()+2)
			</OnShow>
			<OnMouseDown>
				if arg1 == "RightButton" then
					local t = _G[ this:GetParent():GetName().."Backdrop" ]
					if IsShiftKeyDown() then
						if t:IsVisible() then
							t:Hide()
						else
							t:Show()
						end
					else
						this:GetParent():StartMoving()
					end
				else
					anchor = MovAny:SizingAnchor( this )
					this:GetParent().MASizingAnchor = anchor
					this:GetParent():StartSizing( anchor )
				end
			</OnMouseDown>
			<OnMouseUp>
				this:GetParent():StopMovingOrSizing()
				MovAny:UpdatePosition( this:GetParent() )
				this:GetParent().MASizingAnchor = nil
				if arg1 == "RightButton" and not IsShiftKeyDown() then
					MovAny:StopMoving( this:GetParent().tagged:GetName() )
				end
			</OnMouseUp>
		</Scripts>
	</Button>

	<Frame name="MoveAnythingUpdater" parent="UIParent">
		<Scripts>
			<OnUpdate>
				MoveAnythingUpdater_OnUpdate(arg1)
			</OnUpdate>
		</Scripts>
	</Frame>

	<Frame name="MoveAnythingTemplate" frameStrata="TOOLTIP" enableMouse="true" hidden="true" parent="UIParent" movable="true" resizable="true" virtual="true">
		<Size>
			<AbsDimension x="100" y="100"/>
		</Size>
		<ResizeBounds>
			<minResize>
				<AbsDimension x="8" y="8"/>
			</minResize>
		</ResizeBounds>
		<Anchors>
			<Anchor point="BOTTOMLEFT"/>
		</Anchors>
		<Scripts>
			<OnLoad>
				_G[ this:GetName().."Backdrop" ]:SetBackdropColor(1,1,1,0.25)
				_G[ this:GetName().."Backdrop" ]:SetBackdropBorderColor(1,1,1,0.15)
				this.createdTagged = false
			</OnLoad>
			<OnMouseDown>
				if arg1 == "LeftButton" and this.tagged then
					local str = numfor(this.tagged:GetLeft()).." , "..numfor(this.tagged:GetBottom())
					_G[ this:GetName().."BackdropInfoLabel"]:SetText(str)
					if this:GetName() == "MoveAnything"..MovAny.currentMover then
						_G[ "MANudgerInfoLabel"]:SetText(str)
						_G[ "MANudgerInfoLabel"]:Show()
					end
					this.infoShown = true
					this:StartMoving()
				end
			</OnMouseDown>
			<OnUpdate>
				if this.tagged then
					local f = this.tagged
					
					f.MAMoved = nil
					f:ClearAllPoints()
					f:SetPoint( "BOTTOMLEFT", this, "BOTTOMLEFT", 0, 0 )
					f.MAMoved = true
					
					if this.infoShown then
						local str = numfor(f:GetLeft()).." , "..numfor(f:GetBottom())
						local label = _G[ this:GetName().."BackdropInfoLabel"]
						label:Show()
						label:SetText(str)
						
						if this:GetName() == "MoveAnything"..MovAny.currentMover then
							_G[ "MANudgerInfoLabel"]:Show()
							_G[ "MANudgerInfoLabel"]:SetText(str)
						end
					end
				end
			</OnUpdate>
			<!--
			<OnEnter>
				if  (MADB.tooltips and not IsShiftKeyDown()) or (not MADB.tooltips and IsShiftKeyDown()) then
					this.tooltipLines = MovAny:GetFrameTooltipLines(this.tagged:GetName() )
					MovAny.TooltipShowMultiline(0, this)
					this.tooltipLines = nil
				end
			</OnEnter>
			<OnLeave function="MovAny.TooltipHide"/>
			-->
			<OnMouseUp>
				MovAny:UpdatePosition(this)
				this:StopMovingOrSizing()
				if arg1 == "RightButton" and this.tagged then
					local t = _G[this:GetName().."Backdrop"]
					if IsShiftKeyDown() then
						if t:IsVisible() then
							t:Hide()
						else
							t:Show()
						end
					else
						MovAny:StopMoving(this.tagged:GetName())
					end
				end
				MovAny:TooltipHide()
				this.infoShown = nil
			</OnMouseUp>
			<OnMouseWheel>
				MovAny:MoverOnMouseWheel(this)
			</OnMouseWheel>
			<OnSizeChanged>
				MovAny:MoverOnSizeChanged(this)
			</OnSizeChanged>
			<OnShow>
				MovAny:MoverOnShow(this)
				this.startAlpha = this.tagged:GetAlpha()
				_G[this:GetName().."Backdrop"]:Show()
				_G[this:GetName().."BackdropMovingFrameName"]:SetText( "Moving\n"..this.helpfulName )
				if MovAny.NoScale[ this.tagged:GetName() ] then
					_G[this:GetName().."Resize_TOP"]:Hide()
					_G[this:GetName().."Resize_LEFT"]:Hide()
					_G[this:GetName().."Resize_BOTTOM"]:Hide()
					_G[this:GetName().."Resize_RIGHT"]:Hide()
				else
					_G[this:GetName().."Resize_TOP"]:Show()
					_G[this:GetName().."Resize_LEFT"]:Show()
					_G[this:GetName().."Resize_BOTTOM"]:Show()
					_G[this:GetName().."Resize_RIGHT"]:Show()
				end
				
				_G[ this:GetName().."BackdropInfoLabel"]:SetText("")
				if this:GetName() == "MoveAnything"..MovAny.currentMover then
					_G[ "MANudgerInfoLabel"]:SetText("")
				end
			</OnShow>
			<OnHide>
				MovAny:MoverOnHide()
				if this:GetName() == "MoveAnything"..MovAny.currentMover then
					_G[ "MANudgerInfoLabel"]:Hide()
				end
			</OnHide>
		</Scripts>
		<Frames>
			<Frame name="$parentBackdrop" setAllPoints="true" enableMouse="false">
				<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
					<EdgeSize>
						<AbsValue val="8"/>
					</EdgeSize>
					<TileSize>
						<AbsValue val="16"/>
					</TileSize>
					<BackgroundInsets>
						<AbsInset left="3" right="3" top="3" bottom="3"/>
					</BackgroundInsets>
				</Backdrop>
				<Layers>
					<Layer level="ARTWORK">
						<FontString name="$parentMovingFrameName" inherits="GameFontNormal">
							<Anchors>
								<Anchor point="CENTER" />
							</Anchors>
						</FontString>
						<FontString name="$parentInfoLabel" inherits="GameFontHighlightSmall" text="">
							<Anchors>
								<Anchor point="BOTTOM" relativePoint="BOTTOM">
									<Offset>
										<AbsDimension x="6" y="-56"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
			</Frame>
			<Button name="$parentResize_TOP" inherits="ResizingButton"/>
			<Button name="$parentResize_LEFT" inherits="ResizingButton"/>
			<Button name="$parentResize_BOTTOM" inherits="ResizingButton"/>
			<Button name="$parentResize_RIGHT" inherits="ResizingButton"/>
		</Frames>
	</Frame>
	<Frame name="MoveAnything1" inherits="MoveAnythingTemplate" parent="UIParent" id="1"/>
	<Frame name="MoveAnything2" inherits="MoveAnythingTemplate" parent="UIParent" id="2"/>
	<Frame name="MoveAnything3" inherits="MoveAnythingTemplate" parent="UIParent" id="3"/>
	<Frame name="MoveAnything4" inherits="MoveAnythingTemplate" parent="UIParent" id="4"/>
	<Frame name="MoveAnything5" inherits="MoveAnythingTemplate" parent="UIParent" id="5"/>
	<Frame name="MoveAnything6" inherits="MoveAnythingTemplate" parent="UIParent" id="6"/>
	<Frame name="MoveAnything7" inherits="MoveAnythingTemplate" parent="UIParent" id="7"/>
	<Frame name="MoveAnything8" inherits="MoveAnythingTemplate" parent="UIParent" id="8"/>
	<Frame name="MoveAnything9" inherits="MoveAnythingTemplate" parent="UIParent" id="9"/>
	<Frame name="MoveAnything10" inherits="MoveAnythingTemplate" parent="UIParent" id="10"/>
	<Frame name="MoveAnything11" inherits="MoveAnythingTemplate" parent="UIParent" id="11"/>
	<Frame name="MoveAnything12" inherits="MoveAnythingTemplate" parent="UIParent" id="12"/>
	<Frame name="MoveAnything13" inherits="MoveAnythingTemplate" parent="UIParent" id="13"/>
	<Frame name="MoveAnything14" inherits="MoveAnythingTemplate" parent="UIParent" id="14"/>
	<Frame name="MoveAnything15" inherits="MoveAnythingTemplate" parent="UIParent" id="15"/>
	<Frame name="MoveAnything16" inherits="MoveAnythingTemplate" parent="UIParent" id="16"/>
	<Frame name="MoveAnything17" inherits="MoveAnythingTemplate" parent="UIParent" id="17"/>
	<Frame name="MoveAnything18" inherits="MoveAnythingTemplate" parent="UIParent" id="18"/>
	<Frame name="MoveAnything19" inherits="MoveAnythingTemplate" parent="UIParent" id="19"/>
	<Frame name="MoveAnything20" inherits="MoveAnythingTemplate" parent="UIParent" id="20"/>

	<Frame name="UIPanelMover1" parent="UIParent" hidden="false" enableMouse="false">
		<OnShow>
			--MovAny:OnShow(this)
		</OnShow>
		<Size>
			<AbsDimension x="384" y="512"/>
		</Size>
		<Anchors>
			<Anchor point="TOP">
				<Offset>
					<AbsDimension x="0" y="-104"/>
				</Offset>
			</Anchor>
		</Anchors>
	</Frame>

	<Frame name="UIPanelMover2" parent="UIParent" hidden="false" enableMouse="false">
		<OnShow>
			--MovAny:OnShow(this)
		</OnShow>
		<Size>
			<AbsDimension x="384" y="512"/>
		</Size>
		<Anchors>
			<Anchor point="TOPLEFT">
				<Offset>
					<AbsDimension x="384" y="-104"/>
				</Offset>
			</Anchor>
		</Anchors>
	</Frame>

	<Frame name="TooltipMover" frameStrata="TOOLTIP"  parent="UIParent" hidden="false" enableMouse="false">
		<Size>
			<AbsDimension x="150" y="80"/>
		</Size>
		<Anchors>
			<Anchor point="TOP"/>
		</Anchors>
		<Scripts>
			<OnShow>
				this:SetFrameLevel( GameTooltip:GetFrameLevel() + 1 )
			</OnShow>
		</Scripts>
	</Frame>

	<Frame name="BagItemTooltipMover" frameStrata="TOOLTIP"  parent="UIParent" hidden="false" enableMouse="false">
		<Size>
			<AbsDimension x="150" y="80"/>
		</Size>
		<Anchors>
			<Anchor point="TOP"/>
		</Anchors>
		<Scripts>
			<OnShow>
				this:SetFrameLevel( GameTooltip:GetFrameLevel() + 1 )
			</OnShow>
		</Scripts>
	</Frame>

	<Frame name="BagButtonsMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="180" y="44"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMRIGHT" relativeTo = "MainMenuBarArtFrame">
				<Offset>
					<AbsDimension x="-6" y="-1"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				MainMenuBarBackpackButton.MAParent = this
				
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked("BagButtonsVerticalMover") then
						MovAny:ResetFrame("BagButtonsVerticalMover")
					end
					MainMenuBarBackpackButton:ClearAllPoints()
					MainMenuBarBackpackButton:SetPoint("RIGHT", this, "RIGHT", 0, 0)
					CharacterBag0Slot:ClearAllPoints()
					CharacterBag0Slot:SetPoint("RIGHT", "MainMenuBarBackpackButton", "LEFT", -5, 0 )
					CharacterBag1Slot:ClearAllPoints()
					CharacterBag1Slot:SetPoint("RIGHT", "CharacterBag0Slot", "LEFT", -5, 0)
					CharacterBag2Slot:ClearAllPoints()
					CharacterBag2Slot:SetPoint("RIGHT", "CharacterBag1Slot", "LEFT", -5, 0)
					CharacterBag3Slot:ClearAllPoints()
					CharacterBag3Slot:SetPoint("RIGHT", "CharacterBag2Slot", "LEFT", -5, 0)
					this.attachedChildren = {}
					table.insert(this.attachedChildren, _G[ "MainMenuBarBackpackButton" ])
					for i = 0, 3, 1 do
					   table.insert(this.attachedChildren, _G["CharacterBag"..i.."Slot"])
					end
					this:Show()
				end
				this.OnMAPostReset = function( this )
					MainMenuBarBackpackButton:ClearAllPoints()
					MainMenuBarBackpackButton:SetPoint( "BOTTOMRIGHT", "MainMenuBarArtFrame", "BOTTOMRIGHT", -6, 1)
					CharacterBag0Slot:ClearAllPoints()
					CharacterBag0Slot:SetPoint("RIGHT", "MainMenuBarBackpackButton", "LEFT", -5, 0)
					CharacterBag1Slot:ClearAllPoints()
					CharacterBag1Slot:SetPoint("RIGHT", "CharacterBag0Slot", "LEFT", -5, 0)
					CharacterBag2Slot:ClearAllPoints()
					CharacterBag2Slot:SetPoint("RIGHT", "CharacterBag1Slot", "LEFT", -5, 0)
					CharacterBag3Slot:ClearAllPoints()
					CharacterBag3Slot:SetPoint("RIGHT", "CharacterBag2Slot", "LEFT", -5, 0)
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="BagButtonsVerticalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="32" y="172"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMRIGHT" relativeTo = "MainMenuBarArtFrame">
				<Offset>
					<AbsDimension x="-6" y="2"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked("BagButtonsMover") then
						MovAny:ResetFrame("BagButtonsMover")
					end
					MainMenuBarBackpackButton:ClearAllPoints()
					MainMenuBarBackpackButton:SetPoint("BOTTOM", this, "BOTTOM", 0, 0)
					CharacterBag0Slot:ClearAllPoints()
					CharacterBag0Slot:SetPoint("BOTTOM", "MainMenuBarBackpackButton", "TOP", 0, 3)
					CharacterBag1Slot:ClearAllPoints()
					CharacterBag1Slot:SetPoint("BOTTOM", "CharacterBag0Slot", "TOP", 0, 3)
					CharacterBag2Slot:ClearAllPoints()
					CharacterBag2Slot:SetPoint("BOTTOM", "CharacterBag1Slot", "TOP", 0, 3)
					CharacterBag3Slot:ClearAllPoints()
					CharacterBag3Slot:SetPoint("BOTTOM", "CharacterBag2Slot", "TOP", 0, 3)
					MainMenuBarBackpackButton.MAParent = this
					CharacterBag0Slot.MAParent = this
					CharacterBag1Slot.MAParent = this
					CharacterBag2Slot.MAParent = this
					CharacterBag3Slot.MAParent = this
					this.attachedChildren = {}
					table.insert(this.attachedChildren, _G["MainMenuBarBackpackButton"])
					for i = 0, 3, 1 do
						table.insert(this.attachedChildren, _G[ "CharacterBag"..i.."Slot" ])
					end
					this:Show()
				end
				this.OnMAPostReset = function( this )
					MainMenuBarBackpackButton:ClearAllPoints()
					MainMenuBarBackpackButton:SetPoint("BOTTOMRIGHT", "MainMenuBarArtFrame", "BOTTOMRIGHT", -6, 0)
					CharacterBag0Slot:ClearAllPoints()
					CharacterBag0Slot:SetPoint("RIGHT", "MainMenuBarBackpackButton", "LEFT", -5, 0)
					CharacterBag1Slot:ClearAllPoints()
					CharacterBag1Slot:SetPoint("RIGHT", "CharacterBag0Slot", "LEFT", -5, 0)
					CharacterBag2Slot:ClearAllPoints()
					CharacterBag2Slot:SetPoint("RIGHT", "CharacterBag1Slot", "LEFT", -5, 0)
					CharacterBag3Slot:ClearAllPoints()
					CharacterBag3Slot:SetPoint("RIGHT", "CharacterBag2Slot", "LEFT", -5, 0)
					MainMenuBarBackpackButton.MAParent = this
					CharacterBag0Slot.MAParent = BagButtonsMover
					CharacterBag1Slot.MAParent = BagButtonsMover
					CharacterBag2Slot.MAParent = BagButtonsMover
					CharacterBag3Slot.MAParent = BagButtonsMover
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>

		<Frame name="MovableBagFrame" virtual="true" enableMouse="false">
		<Size>
			<AbsDimension x="1" y="1"/>
		</Size>
		<Scripts>
			<OnLoad>
				local x,y
				x = -50 - (this:GetID() * 50)
				y = 50 + (this:GetID() * 50)
				this:SetPoint("BOTTOMRIGHT", "UIParent", "BOTTOMRIGHT", x, y)
				 
				local CONTAINER_FRAME_TABLE = {
					[0] = {"Interface\\ContainerFrame\\UI-BackpackBackground", 256, 256, 239},
					[1] = {"Interface\\ContainerFrame\\UI-Bag-1x4", 256, 128, 96},
					[2] = {"Interface\\ContainerFrame\\UI-Bag-1x4", 256, 128, 96},
					[3] = {"Interface\\ContainerFrame\\UI-Bag-1x4", 256, 128, 96},
					[4] = {"Interface\\ContainerFrame\\UI-Bag-1x4", 256, 128, 96},
					[5] = {"Interface\\ContainerFrame\\UI-Bag-1x4+2", 256, 128, 116},
					[6] = {"Interface\\ContainerFrame\\UI-Bag-1x4+2", 256, 128, 116},
					[7] = {"Interface\\ContainerFrame\\UI-Bag-1x4+2", 256, 128, 116},
					[8] = {"Interface\\ContainerFrame\\UI-Bag-2x4", 256, 256, 137},
					[9] = {"Interface\\ContainerFrame\\UI-Bag-2x4+2", 256, 256, 157},
					[10] = {"Interface\\ContainerFrame\\UI-Bag-2x4+2", 256, 256, 157},
					[11] = {"Interface\\ContainerFrame\\UI-Bag-2x4+2", 256, 256, 157},
					[12] = {"Interface\\ContainerFrame\\UI-Bag-3x4", 256, 256, 178},
					[13] = {"Interface\\ContainerFrame\\UI-Bag-3x4+2", 256, 256, 198},
					[14] = {"Interface\\ContainerFrame\\UI-Bag-3x4+2", 256, 256, 198},
					[15] = {"Interface\\ContainerFrame\\UI-Bag-3x4+2", 256, 256, 198},
					[16] = {"Interface\\ContainerFrame\\UI-Bag-4x4", 256, 256, 219},
					[18] = {"Interface\\ContainerFrame\\UI-Bag-4x4+2", 256, 256, 239},
					[20] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 259},
					[22] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 279},
					[24] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 299},
					[26] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 319},
					[28] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 339},
					[30] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 359},
					[32] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 379},
					[34] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 399},
					[36] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 419},
					[38] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 439},
					[40] = {"Interface\\ContainerFrame\\UI-Bag-5x4", 256, 256, 459},
				}
				this.realID = this:GetID()
				if this:GetName() == "KeyRingFrame" then
					this.realID = KEYRING_CONTAINER
				end
				MovAny:SetBag(this.realID, this)

				this.OnMAHook = function( this )
					if this.realID == KEYRING_CONTAINER then
						this.size = GetKeyRingSize()
					else
						this.size = GetContainerNumSlots(this.realID)
					end
					if this.size ~= 0 then
						local frameSettings = CONTAINER_FRAME_TABLE[this.size]
						if this.realID == 0 then
							frameSettings = CONTAINER_FRAME_TABLE[0]
						end
						this:SetWidth(CONTAINER_WIDTH)
						this:SetHeight(frameSettings[4])
						local container = MovAny:GetContainerFrame(this.realID)
						if container then
							this:SetPoint("BOTTOMLEFT", "UIParent", "BOTTOMLEFT", container:GetLeft(), container:GetBottom())
							MovAny:GrabContainerFrame(container, MovAny:GetBag(this.realID))
							local wasMoved = container.MALocked
							container.MAMoved = nil
							container:ClearAllPoints()
							container:SetPoint("BOTTOMLEFT", this, "BOTTOMLEFT", 0, 0)
							MovAny.MAMoved = wasMoved
							MovAny:LockPosition(container)
						end
						return true
					else
						if this.realID > NUM_BAG_SLOTS then
							--maPrint("You must be at the bank and have purchased this bank slot before you can move it")
						end
						return false
					end
				end

				this.OnMAPreReset = function( this )
					this.MAMoved = nil
				end

				this.OnMAPostReset = function( this )
					updateContainerFrameAnchors()
				end

				this.OnMAPostAttach = function( this )
					updateContainerFrameAnchors()
				end
				
				local alphaer = function(ref, alpha)
					local con = MovAny:GetContainerFrame(ref.realID)
					if con then
						con:SetAlpha(alpha)
					end
				end
				this.OnMAAlpha = alphaer
				
				local scaler = function(ref, scale)
					local con = MovAny:GetContainerFrame(ref.realID)
					if con and scale and scale >= 0 then
						con:SetScale(scale)
					end
				end
				this.OnMAScale = scaler
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="BagFrame1" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="0"/>
	<Frame name="BagFrame2" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="1"/>
	<Frame name="BagFrame3" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="2"/>
	<Frame name="BagFrame4" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="3"/>
	<Frame name="BagFrame5" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="4"/>
	<Frame name="BankBagFrame1" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="5"/>
	<Frame name="BankBagFrame2" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="6"/>
	<Frame name="BankBagFrame3" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="7"/>
	<Frame name="BankBagFrame4" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="8"/>
	<Frame name="BankBagFrame5" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="9"/>
	<Frame name="BankBagFrame6" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="10"/>
	<Frame name="BankBagFrame7" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="11"/>
	<Frame name="KeyRingFrame" inherits="MovableBagFrame" parent="UIParent" hidden="false" id="-2"/>

	<Frame name="MicroButtonsMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="254" y="36"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "MainMenuBarArtFrame">
				<Offset>
					<AbsDimension x="550" y="2"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				local grab = { CharacterMicroButton, SpellbookMicroButton,
							TalentMicroButton, AchievementMicroButton, QuestLogMicroButton,
							SocialsMicroButton, PVPMicroButton, LFDMicroButton,
							MainMenuMicroButton, HelpMicroButton }
				for i, v in pairs(grab) do
					v.MAParent = this
				end
				
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "MicroButtonsVerticalMover" ) then
						MovAny:ResetFrame( "MicroButtonsVerticalMover" )
					end
					this.attachedChildren = {}
					for i in pairs(grab) do
						local b, pb
						b = grab[i]
						
						if i == 1 then
							b:ClearAllPoints()
							b:SetPoint( "BOTTOMLEFT", this, "BOTTOMLEFT" )
							pb = nil
						else
							pb = grab[i-1]
						end
						b.MAParent = this
						table.insert( this.attachedChildren, b )
					end
					this:Show()
				end
				this.OnMAPostReset = function( this )
					CharacterMicroButton:ClearAllPoints()
					CharacterMicroButton:SetPoint( "BOTTOMLEFT", "MainMenuBarArtFrame", "BOTTOMLEFT", 548, 2 )
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="MicroButtonsVerticalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="28" y="340"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "MainMenuBarArtFrame">
				<Offset>
					<AbsDimension x="546" y="2"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				local grab = { CharacterMicroButton, SpellbookMicroButton,
							TalentMicroButton, AchievementMicroButton, QuestLogMicroButton,
							SocialsMicroButton, PVPMicroButton, LFDMicroButton,
							MainMenuMicroButton, HelpMicroButton }

				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "MicroButtonsMover" ) then
						MovAny:ResetFrame( "MicroButtonsMover" )
					end
					this.attachedChildren = {}

					local priv_i = 0
					for i in pairs(grab) do
						local b, pb
						b = grab[i]

						grab[i]:ClearAllPoints()
						if i == 1 then
							grab[i]:SetPoint( "TOPLEFT", this, "TOPLEFT", 0, 24 )
							prev_i = 1
						else
							grab[i]:SetPoint( "TOPLEFT", grab[prev_i], "BOTTOMLEFT", 0, 24 )
							if i then
								prev_i = i
							end
						end
						b.MAParent = this
						table.insert( this.attachedChildren, b )
					end
					this:Show()
				end
				this.OnMAPreReset = function ( this )
					local p = _G["MicroButtonsMover"]
					if this.attachedChildren then
						for i, b in pairs(this.attachedChildren) do
							b.MAParent = p
						end
					end
				end
				this.OnMAPostReset = function( this )
					CharacterMicroButton:ClearAllPoints()
					CharacterMicroButton:SetPoint( "BOTTOMLEFT", "MainMenuBarArtFrame", "BOTTOMLEFT", 546, 2 )
					
					local prev_i = 1 -- start at ((i>1)-1)
					for i in pairs(grab) do
						local b, pb
						if i > 1 then
							grab[i]:ClearAllPoints()
							-- grab[i]:SetPoint( "BOTTOMLEFT", grab[i-1], "BOTTOMRIGHT", -2, 0 )
							grab[i]:SetPoint( "BOTTOMLEFT", grab[prev_i], "BOTTOMRIGHT", -2, 0 )
							if i then
								prev_i = i
							end
						end
					end
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>

	<Frame name="BasicActionButtonsMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="498" y="38"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "MainMenuBarArtFrame">
				<Offset>
					<AbsDimension x="8" y="4"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				local i, b
				for i = 1, 12 do
					b = _G[ "ActionButton"..i ]
					b.MAParent = this
				end
				this.OnMAHook = function( this )
					local b, pb
					if MovAny:IsFrameHooked( "BasicActionButtonsVerticalMover" ) then
						MovAny:ResetFrame( "BasicActionButtonsVerticalMover" )
					end
					ActionButton1:ClearAllPoints()
					ActionButton1:SetPoint( "LEFT", this, "LEFT", 0, 0 )
					ActionBarUpButton:ClearAllPoints( )
					ActionBarUpButton:SetPoint( "TOPLEFT", "ActionButton12", "TOPRIGHT", -6, 4 )
					ActionBarDownButton:ClearAllPoints()
					ActionBarDownButton:SetPoint( "BOTTOMLEFT", "ActionButton12", "BOTTOMRIGHT", -6, -8 )
					this.attachedChildren = {}
					for i = 1, 12, 1 do
						b = _G[ "ActionButton"..i ]
					   table.insert( this.attachedChildren, _G[ "ActionButton"..i ] )
					   table.insert( this.attachedChildren, _G[ "BonusActionButton"..i ] )
						if i > 1 then
							pb = _G[ "ActionButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "LEFT", pb, "RIGHT", 6, 0 )
						end
						b.MAOrgParent = b:GetParent()
						b:SetParent(this)
						b:SetFrameLevel(4)
						_G[ "BonusActionButton"..i ]:ClearAllPoints()
						_G[ "BonusActionButton"..i ]:SetPoint( "CENTER", b, "CENTER" )
					end
					table.insert( this.attachedChildren, ActionBarUpButton )
					table.insert( this.attachedChildren, ActionBarDownButton )
					this:Show()
				end
				this.OnMAPreReset = function ( this )
					if this.attachedChildren then
						for i, v in pairs(this.attachedChildren) do
							if v.MAOrgParent then
								v:SetFrameLevel(3)
								v:SetParent(v.MAOrgParent)
								v.MAOrgParent = nil
							end
						end
					end
				end
				this.OnMAPostReset = function( this )
					local b, pb
					ActionButton1:ClearAllPoints()
					ActionButton1:SetPoint( "BOTTOMLEFT", "MainMenuBarArtFrame", "BOTTOMLEFT", 8, 4 )
					ActionBarUpButton:ClearAllPoints()
					ActionBarUpButton:SetPoint( "CENTER", "MainMenuBarArtFrame", "TOPLEFT", 522, -22 )
					ActionBarDownButton:ClearAllPoints()
					ActionBarDownButton:SetPoint( "CENTER", "MainMenuBarArtFrame", "TOPLEFT", 522, -42 )
					for i = 1, 12, 1 do
						b = _G[ "ActionButton"..i ]
						if i > 1 then
							pb = _G[ "ActionButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "LEFT", pb, "RIGHT", 6, 0 )
						end
						_G[ "BonusActionButton"..i ]:ClearAllPoints()
						_G[ "BonusActionButton"..i ]:SetPoint( "CENTER", b, "CENTER" )
					end
					this:Hide()
				end
				this.MANoScaleChildren = true
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="BasicActionButtonsVerticalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="38" y="475"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "MainMenuBarArtFrame">
				<Offset>
					<AbsDimension x="8" y="4"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
					local b, pb
					if MovAny:IsFrameHooked( "BasicActionButtonsMover" ) then
						MovAny:ResetFrame( "BasicActionButtonsMover" )
					end
					ActionButton1:ClearAllPoints()
					ActionButton1:SetPoint( "TOP", this, "TOP", 0, 0 )
					this.attachedChildren = {}
					for i = 1, 12, 1 do
						b = _G[ "ActionButton"..i ]
						table.insert( this.attachedChildren, _G[ "ActionButton"..i ] )
						table.insert( this.attachedChildren, _G[ "BonusActionButton"..i ] )
						if i > 1 then
							pb = _G[ "ActionButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "TOP", pb, "BOTTOM", 0, -2 )
						end
						_G[ "BonusActionButton"..i ]:ClearAllPoints()
						_G[ "BonusActionButton"..i ]:SetPoint( "CENTER", b, "CENTER" )
					end
					table.insert( this.attachedChildren, ActionBarUpButton )
					table.insert( this.attachedChildren, ActionBarDownButton )
					ActionBarUpButton:ClearAllPoints( )
					ActionBarUpButton:SetPoint( "TOPLEFT", "ActionButton12", "BOTTOMLEFT", -8, 4 )
					ActionBarDownButton:ClearAllPoints()
					ActionBarDownButton:SetPoint( "TOPRIGHT", "ActionButton12", "BOTTOMRIGHT", 8, 4 )
					this:Show()
				end
				this.OnMAPostReset = function( this )
					local b, pb
					ActionButton1:ClearAllPoints()
					ActionButton1:SetPoint( "BOTTOMLEFT", "MainMenuBarArtFrame", "BOTTOMLEFT", 8, 4 )
					ActionBarUpButton:ClearAllPoints()
					ActionBarUpButton:SetPoint( "CENTER", "MainMenuBarArtFrame", "TOPLEFT", 522, -22 )
					ActionBarDownButton:ClearAllPoints()
					ActionBarDownButton:SetPoint( "CENTER", "MainMenuBarArtFrame", "TOPLEFT", 522, -42 )
					for i = 1, 12, 1 do
						b = _G[ "ActionButton"..i ]
						if i > 1 then
							pb = _G[ "ActionButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "LEFT", pb, "RIGHT", 6, 0 )
						end
						_G[ "BonusActionButton"..i ]:ClearAllPoints()
						_G[ "BonusActionButton"..i ]:SetPoint( "CENTER", b, "CENTER" )
					end
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>

	<Frame name="PetActionButtonsMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="370" y="32"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "PetActionBarFrame">
				<Offset>
					<AbsDimension x="36" y="1"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				for i = 1, 10 do
					_G["PetActionButton"..i].MAParent = this
				end
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "PetActionButtonsVerticalMover" ) then
						MovAny:ResetFrame( "PetActionButtonsVerticalMover" )
					end
					PetActionButton1:ClearAllPoints()
					PetActionButton1:SetPoint( "LEFT", this, "LEFT", 0, 0 )
					this:SetFrameLevel( PetActionButton1:GetFrameLevel() + 1 )
					this.attachedChildren = {}
					for i = 1, 10, 1 do
						table.insert( this.attachedChildren, _G[ "PetActionButton"..i ] )
						b = _G[ "PetActionButton"..i ]
						if i > 1 then
							pb = _G[ "PetActionButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "LEFT", pb, "RIGHT", 4, 0 )
						end
						b.MAParent = this
					end
					this:Show()
				end
				this.OnMAPostReset = function( this )
					PetActionButton1:ClearAllPoints()
					PetActionButton1:SetPoint( "BOTTOMLEFT", "PetActionBarFrame", "BOTTOMLEFT", 36, 1 )
					for i = 2, 10, 1 do
						b = _G[ "PetActionButton"..i ]
						pb = _G[ "PetActionButton"..(i-1) ]
						b:ClearAllPoints()
						b:SetPoint( "LEFT", pb, "RIGHT", 8, 0 )
					end
					this.attachedChildren = nil
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="PetActionButtonsVerticalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="32" y="370"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "PetActionBarFrame">
				<Offset>
					<AbsDimension x="36" y="1"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "PetActionButtonsMover" ) then
						MovAny:ResetFrame( "PetActionButtonsMover" )
					end
					local b, pb
					PetActionButton1:ClearAllPoints()
					PetActionButton1:SetPoint( "TOP", this, "TOP", 0, 0 )
					this:SetFrameLevel( PetActionButton1:GetFrameLevel() + 1 )
					this.attachedChildren = {}
					for i = 1, 10, 1 do
						b = _G[ "PetActionButton"..i ]
						table.insert( this.attachedChildren, b )
						if i > 1 then
							pb = _G[ "PetActionButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "TOP", pb, "BOTTOM", 0, -3 )
						end
						b.MAParent = this
					end
					this:Show()
				end
				this.OnMAPostReset = function( this )
					local b, pb
					PetActionButton1:ClearAllPoints()
					PetActionButton1:SetPoint( "BOTTOMLEFT", "PetActionBarFrame", "BOTTOMLEFT", 36, 1 )
					for i = 2, 10, 1 do
						b = _G[ "PetActionButton"..i ]
						pb = _G[ "PetActionButton"..(i-1) ]
						b:ClearAllPoints()
						b:SetPoint( "LEFT", pb, "RIGHT", 8, 0 )
						b.MAParent = PetActionButtonsMover
					end
					this.attachedChildren = nil
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>

	<Frame name="ShapeshiftButtonsMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="225" y="32"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "ShapeshiftBarFrame">
				<Offset>
					<AbsDimension x="11" y="3"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				for i = 1, 10 do
					_G["ShapeshiftButton"..i].MAParent = this
				end
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "ShapeshiftButtonsVerticalMover" ) then
						MovAny:ResetFrame( "ShapeshiftButtonsVerticalMover" )
					end
					
					local x = ShapeshiftBarFrame:GetLeft()
					local y = ShapeshiftBarFrame:GetBottom()
					this:ClearAllPoints()
					this:SetPoint("BOTTOMLEFT", UIParent, "BOTTOMLEFT", x, y)
					
					ShapeshiftBarFrame.MAParent = this
					for i = 1, 10 do
						_G["ShapeshiftButton"..i].MAParent = this
					end
					ShapeshiftBarFrame:DisableDrawLayer("BACKGROUND")
					ShapeshiftBarFrame:DisableDrawLayer("BORDER")
					this.attachedChildren = {ShapeshiftBarFrame}
					this:Show()
				end
				this.OnMAPosition = function( this )
					MovAny:UnlockPosition(ShapeshiftBarFrame)
					ShapeshiftBarFrame:ClearAllPoints()
					ShapeshiftBarFrame:SetPoint( "LEFT", this, "LEFT", 0, 0 )
					MovAny:LockPosition(ShapeshiftBarFrame)
				end
				this.OnMAOnAttach = function(this)
					ShapeshiftBarFrame:ClearAllPoints()
					ShapeshiftBarFrame:SetPoint( "LEFT", this, "LEFT", 0, 0 )
				end
				this.OnMAOnDetach = function(this)
					--MovAny:LockPosition(ShapeshiftBarFrame)
				end
				this.OnMAPostReset = function( this )
					MovAny:UnlockPosition(ShapeshiftBarFrame)
					MovAny:ResetPosition(ShapeshiftBarFrame, MovAny:GetFrameOptions("ShapeshiftButtonsMover"), true)
					this.attachedChildren = nil
					this:Hide()
					ShapeshiftBarFrame:EnableDrawLayer("BACKGROUND")
					ShapeshiftBarFrame:EnableDrawLayer("BORDER")
				end
			</OnLoad>
		</Scripts>
	</Frame>
	<Frame name="ShapeshiftButtonsVerticalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="32" y="225"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOMLEFT" relativeTo = "ShapeshiftBarFrame">
				<Offset>
					<AbsDimension x="11" y="3"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "ShapeshiftButtonsMover" ) then
						MovAny:ResetFrame( "ShapeshiftButtonsMover" )
					end
					ShapeshiftBarFrame:DisableDrawLayer("BACKGROUND")
					ShapeshiftBarFrame:DisableDrawLayer("BORDER")
					ShapeshiftBarFrame.MAParent = this
					local b, pb
					ShapeshiftButton1:ClearAllPoints()
					ShapeshiftButton1:SetPoint( "TOP", this, "TOP", 0, -7 )
					this.attachedChildren = {}
					for i = 1, 10, 1 do
					   table.insert( this.attachedChildren, _G[ "ShapeshiftButton"..i ] )
						if i > 1 then
							b = _G[ "ShapeshiftButton"..i ]
							b.MAParent = this
							pb = _G[ "ShapeshiftButton"..(i-1) ]
							b:ClearAllPoints()
							b:SetPoint( "TOP", pb, "BOTTOM", 0, -7 )
							MovAny:LockPosition(b)
						end
					end
					this:Show()
				end
				this.OnMAPostReset = function( this )
					local b, pb
					ShapeshiftButton1:ClearAllPoints()
					ShapeshiftButton1:SetPoint( "BOTTOMLEFT", "ShapeshiftBarFrame", "BOTTOMLEFT", 11, 3 )
					for i = 2, 10, 1 do
						b = _G[ "ShapeshiftButton"..i ]
						pb = _G[ "ShapeshiftButton"..(i-1) ]
						b:ClearAllPoints()
						b:SetPoint( "LEFT", pb, "RIGHT", 7, 0 )
						b.MAParent = _G[ "ShapeshiftButtonsMover" ]
						MovAny:UnlockPosition(b)
					end
					this.attachedChildren = nil
					this:Hide()
					ShapeshiftBarFrame:EnableDrawLayer("BACKGROUND")
					ShapeshiftBarFrame:EnableDrawLayer("BORDER")
				end
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Frame name="MultiBarRightHorizontalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="498" y="38"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOM" relativeTo = "UIParent">
				<Offset>
					<AbsDimension x="0" y="250"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "MultiBarRight" ) then
						MovAny:ResetFrame("MultiBarRight")
					end
					local b, pb
					this.attachedChildren = {}
					for i = 1, 12, 1 do
						b = _G[ "MultiBarRightButton"..i ]
						table.insert( this.attachedChildren, b)
						b:ClearAllPoints()
						if i > 1 then
							b:SetPoint( "LEFT", pb, "RIGHT", 6, 0 )
						else
							b:SetPoint( "TOPLEFT", this)
						end
						pb = b
						b.MAParent = this
						--b:SetParent(this)
						--b:SetFrameLevel(4)
					end
					this:Show()
				end
				this.OnMAPreReset = function ( this )
					if this.attachedChildren then
						for i, v in pairs(this.attachedChildren) do
							v.MAParent = nil
						end
					end
				end
				this.OnMAPostReset = function( this )
					local b, pb
					MultiBarRightButton1:ClearAllPoints()
					MultiBarRightButton1:SetPoint( "TOPRIGHT", "MultiBarRight" )
					for i = 2, 12, 1 do
						b = _G[ "MultiBarRightButton"..i ]
						pb = _G[ "MultiBarRightButton"..(i-1) ]
						b:ClearAllPoints()
						b:SetPoint( "TOP", pb, "BOTTOM", 0, -6 )
					end
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>
	
	<Frame name="MultiBarLeftHorizontalMover" parent="UIParent" hidden="true" enableMouse="false">
		<Size>
			<AbsDimension x="498" y="38"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOM" relativeTo = "UIParent">
				<Offset>
					<AbsDimension x="0" y="285"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
					if MovAny:IsFrameHooked( "MultiBarLeft" ) then
						MovAny:ResetFrame("MultiBarLeft")
					end
					local b, pb
					this.attachedChildren = {}
					for i = 1, 12, 1 do
						b = _G[ "MultiBarLeftButton"..i ]
						table.insert( this.attachedChildren, b)
						b:ClearAllPoints()
						if i > 1 then
							b:SetPoint( "LEFT", pb, "RIGHT", 6, 0 )
						else
							b:SetPoint( "TOPLEFT", this)
						end
						pb = b
						b.MAParent = this
						--b:SetParent(this)
						--b:SetFrameLevel(4)
					end
					this:Show()
				end
				this.OnMAPreReset = function ( this )
					if this.attachedChildren then
						for i, v in pairs(this.attachedChildren) do
							v.MAParent = nil
						end
					end
				end
				this.OnMAPostReset = function( this )
					local b, pb
					MultiBarLeftButton1:ClearAllPoints()
					MultiBarLeftButton1:SetPoint( "TOPRIGHT", "MultiBarLeft")
					pb = MultiBarLeftButton1
					for i = 2, 12, 1 do
						b = _G[ "MultiBarLeftButton"..i ]
						b:ClearAllPoints()
						b:SetPoint( "TOP", pb, "BOTTOM", 0, -6 )
						pb = b
					end
					this:Hide()
				end
			</OnLoad>
		</Scripts>
	</Frame>

	<Frame name="FramerateMover" parent="UIParent" hidden="false" enableMouse="false">
		<Size>
			<AbsDimension x="90" y="32"/>
		</Size>
		<Anchors>
			<Anchor point="BOTTOM" relativeTo = "WorldFrame">
				<Offset>
					<AbsDimension x="0" y="64"/>
				</Offset>
			</Anchor>
		</Anchors>
		<Scripts>
			<OnLoad>
				this.OnMAHook = function( this )
						this.attachedChildren = {}
						table.insert( this.attachedChildren, _G[ "FramerateLabel" ] )
						FramerateLabel:ClearAllPoints()
						FramerateLabel:SetPoint( "LEFT", this, "LEFT", 12, 0 )
					end
				this.OnMAPostReset = function( this )
						this.attachedChildren = nil
						FramerateLabel:ClearAllPoints()
						FramerateLabel:SetPoint( "BOTTOM", "WorldFrame", "BOTTOM", 0, 64 )
					end
			</OnLoad>
		</Scripts>
	</Frame>

	<Button name="MAOptionsButtonTemplate" inherits="UIPanelButtonTemplate" virtual="true">
		<Size>
			<AbsDimension x="70" y="22"/>
		</Size>
		<NormalText inherits="GameFontHighlight"/>
		<DisabledText inherits="GameFontDisable"/>
		<HighlightText inherits="GameFontHighlight"/>
	</Button>

	<Frame name="MAMovableFrameTemplate" virtual="true">
		<Size>
			<AbsDimension x="300" y="24"/>
		</Size>
		<Frames>
			<Frame name="$parentBackdrop">
				<Size>
					<AbsDimension x="250" y="24"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT"/>
				</Anchors>
				<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
					<EdgeSize>
						<AbsValue val="12"/>
					</EdgeSize>
					<TileSize>
						<AbsValue val="16"/>
					</TileSize>
					<BackgroundInsets>
						<AbsInset left="2" right="2" top="2" bottom="2"/>
					</BackgroundInsets>
				</Backdrop>
				<Scripts>
					<OnLoad>
						this:SetBackdropColor( 0.03, 0.03, 0.03 )
						this:SetBackdropBorderColor( 0.4, 0.4, 0.4 )
					</OnLoad>
				</Scripts>
			</Frame>
			<Frame name="$parentFrameName">
				<Size>
					<AbsDimension x="250" y="24"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT"/>
				</Anchors>
				<Layers>
					<Layer level="ARTWORK">
						<FontString name="$parentText" inherits="GameFontHighlight" text="">
							<Anchors>
								<Anchor point="LEFT">
									<Offset>
										<AbsDimension x="6" y="0"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
						<FontString name="$parentHighlight" inherits="GameFontNormal" text="">
							<Anchors>
								<Anchor point="LEFT">
									<Offset>
										<AbsDimension x="6" y="0"/>
									</Offset>
								</Anchor>
							</Anchors>
						</FontString>
					</Layer>
				</Layers>
				<Scripts>
					<OnMouseUp>
						MovAny:RowTitleClicked(this)
					</OnMouseUp>
				</Scripts>
			</Frame>
			<CheckButton name="$parentMove" inherits="UICheckButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="RIGHT" relativeTo="$parentFrameName">
						<Offset>
							<AbsDimension x="4" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						MovAny:OnMoveCheck( this )
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentHide" inherits="UICheckButtonTemplate">
				<Anchors>
					<Anchor point="LEFT" relativePoint="RIGHT" relativeTo="$parentMove">
						<Offset>
							<AbsDimension x="3" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						MovAny:OnHideCheck( this )
					</OnClick>
				</Scripts>
			</CheckButton>
			<Button name="$parentReset" inherits="UIPanelButtonTemplate" text="Reset">
				<Size>
					<AbsDimension x="44" y="20"/>
				</Size>
				<Anchors>
					<Anchor point="LEFT" relativePoint="RIGHT" relativeTo="$parentHide">
						<Offset>
							<AbsDimension x="3" y="1"/>
						</Offset>
					</Anchor>
				</Anchors>
				<NormalText inherits="GameFontHighlight"/>
				<Scripts>
					<OnClick>
						MovAny:OnResetCheck( this )
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
	</Frame>

	<Frame name="MAOptions" toplevel="true" frameStrata="DIALOG" movable="true" enableMouse="true" hidden="true" parent="UIParent">
		<TitleRegion setAllPoints="true"/>
		<Size>
			<AbsDimension x="420" y="500"/>
		</Size>
		<Anchors>
			<Anchor point="CENTER"/>
		</Anchors>
		<Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="32"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="32"/>
			</EdgeSize>
		</Backdrop>
		<Layers>
			<Layer level="ARTWORK">
				<Texture name="$parentFrameHeader" file="Interface\DialogFrame\UI-DialogBox-Header">
					<Size>
						<AbsDimension x="370" y="64"/>
					</Size>
					<Anchors>
						<Anchor point="TOP">
							<Offset>
								<AbsDimension x="10" y="12"/>
							</Offset>
						</Anchor>
					</Anchors>
				</Texture>
				<FontString name="$parentCaption" inherits="GameFontNormal" text="MoveAnything">
					<Anchors>
						<Anchor point="TOP" relativeTo="$parentFrameHeader">
							<Offset>
								<AbsDimension x="0" y="-14"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentFrameNameHeader" inherits="GameFontHighlightSmall" text="Categories and Frames">
					<Anchors>
						<Anchor point="TOPLEFT">
							<Offset>
								<AbsDimension x="24" y="-32"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentMoveHeader" inherits="GameFontHighlightSmall" text="Move">
					<Anchors>
						<Anchor point="LEFT" relativePoint="LEFT" relativeTo="$parentFrameNameHeader">
							<Offset>
								<AbsDimension x="246" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentHideHeader" inherits="GameFontHighlightSmallOutline" text="Hide">
					<Anchors>
						<Anchor point="LEFT" relativePoint="LEFT" relativeTo="$parentMoveHeader">
							<Offset>
								<AbsDimension x="40" y="0"/>
							</Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<CheckButton name="$parentCharacterSpecific" inherits="UICheckButtonTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="10" y="7"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[this:GetName().."Text"]:SetText("UCS")
					</OnLoad>
					<OnClick>
						MovAny:OnCheckCharacterSpecific( this )
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentToggleTooltips" inherits="UICheckButtonTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="67" y="7"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[this:GetName().."Text"]:SetText("TT")
						this.tooltipText = "Toggles display of tooltips. Press Shift when mousing over elements to reverse tooltip display behavior"
					</OnLoad>
					<OnClick>
						MovAny:OnCheckToggleTooltips( this )
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentToggleModifiedFramesOnly" inherits="UICheckButtonTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="114" y="7"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[this:GetName().."Text"]:SetText("MF")
						this.tooltipText = "Show only modified frames"
					</OnLoad>
					<OnClick>
						MovAny:OnCheckToggleModifiedFramesOnly( this )
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentToggleCategories" inherits="UICheckButtonTemplate">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset>
							<AbsDimension x="162" y="7"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						_G[this:GetName().."Text"]:SetText("CE")
						this.tooltipText = "Toggle all categories"
					</OnLoad>
					<OnClick>
						MovAny:OnCheckToggleCategories( this )
					</OnClick>
				</Scripts>
			</CheckButton>
			<Button name="MAOptionsResetAll" inherits="MAOptionsButtonTemplate" text="Reset All">
				<Anchors>
					<Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMRIGHT">
						<Offset>
							<AbsDimension x="-14" y="14"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this.tooltipText = "Resets all frames"
					</OnLoad>
					<OnClick>
						PlaySound("igMainMenuOption")
						StaticPopup_Show( "MOVEANYTHING_RESET_CONFIRM" )
					</OnClick>
				</Scripts>
			</Button>
			<Button name="MAOptionsClose" inherits="MAOptionsButtonTemplate" text="Close">
				<Size>
					<AbsDimension x="50" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="RIGHT" relativePoint="LEFT" relativeTo="MAOptionsResetAll">
						<Offset>
							<AbsDimension x="-4" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this.tooltipText = "Closes this dialog. Ctrl-Shift-Alt click reloads the interface"
					</OnLoad>
					<OnClick>
						if IsShiftKeyDown() and IsControlKeyDown() and IsAltKeyDown() then
							ReloadUI()
						else
							MADB.autoShowNext = false
							MAOptions:Hide()
						end
					</OnClick>
				</Scripts>
			</Button>
			<Button name="MAOptionsSync" inherits="MAOptionsButtonTemplate" text="Sync">
				<Size>
					<AbsDimension x="50" y="22"/>
				</Size>
				<Anchors>
					<Anchor point="RIGHT" relativePoint="LEFT" relativeTo="MAOptionsClose">
						<Offset>
							<AbsDimension x="-4" y="0"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this.tooltipText = "Synchronizes all frames modified by MoveAnything"
					</OnLoad>
					<OnClick>
						MovAny:SyncAllFrames()
					</OnClick>
				</Scripts>
			</Button>
			<Frame name="MAMove1" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAOptionsFrameNameHeader">
						<Offset>
							<AbsDimension x="-8" y="-4"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove2" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove1">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove3" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove2">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove4" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove3">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove5" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove4">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove6" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove5">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove7" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove6">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove8" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove7">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove9" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove8">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove10" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove9">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove11" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove10">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove12" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove11">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove13" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove12">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove14" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove13">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove15" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove14">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<Frame name="MAMove16" inherits="MAMovableFrameTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" relativeTo="MAMove15">
						<Offset>
							<AbsDimension x="0" y="-2"/>
						</Offset>
					</Anchor>
				</Anchors>
			</Frame>
			<ScrollFrame name="MAScrollFrame" inherits="FauxScrollFrameTemplate">
				<Size>
					<AbsDimension x="380" y="442"/>
				</Size>
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset>
							<AbsDimension x="-34" y="-13"/>
						</Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnVerticalScroll>
						FauxScrollFrame_OnVerticalScroll(self, offset, MovAny.SCROLL_HEIGHT, MovAny.UpdateGUI)
					</OnVerticalScroll>
				</Scripts>
				<Frames>
					<Frame name="MAScrollBorder">
						<Size>
							<AbsDimension x="20" y="431"/>
						</Size>
						<Anchors>
							<Anchor point="TOPRIGHT">
								<Offset>
									<AbsDimension x="24" y = "-14"/>
								</Offset>
							</Anchor>
						</Anchors>
						<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
							<EdgeSize>
								<AbsValue val="12"/>
							</EdgeSize>
							<TileSize>
								<AbsValue val="16"/>
							</TileSize>
							<BackgroundInsets>
								<AbsInset left="2" right="2" top="2" bottom="2"/>
							</BackgroundInsets>
						</Backdrop>
						<Scripts>
							<OnLoad>
								this:SetBackdropColor( 0.1, 0.1, 0.1 )
								this:SetBackdropBorderColor( 0.4, 0.4, 0.4 )
							</OnLoad>
						</Scripts>
					</Frame>
				</Frames>
			</ScrollFrame>
		</Frames>
		<Scripts>
			<OnLoad>
				this:RegisterEvent("ADDON_LOADED")
				this:RegisterEvent("PLAYER_LOGOUT")
				this:RegisterEvent("PLAYER_ALIVE")
				this:RegisterEvent("PLAYER_ENTERING_WORLD")
				this:RegisterEvent("PLAYER_REGEN_ENABLED")
			</OnLoad>
			<OnShow>
				MovAny:OnShow()
			</OnShow>
			<OnHide>
				MovAny:OnHide()
			</OnHide>
			<OnEvent>
				if event == "PLAYER_REGEN_ENABLED" then
					MovAny:SyncFrames()
				elseif event == "ADDON_LOADED" then
					if arg1 == "MoveAnything" then
						MovAny:Boot()
						MovAny.Boot = nil
					else
						MovAny:SyncFrames()
					end
				elseif event == "PLAYER_LOGOUT" then
					MovAny.OnPlayerLogout()
				elseif event == "PLAYER_ENTERING_WORLD" then
					MovAny:SyncAllFrames()
				else
					MovAny:SyncFrames()
				end
			</OnEvent>
		</Scripts>
	</Frame>
	<Button name="MA_NudgeButton" inherits="UIPanelButtonTemplate" virtual="true" hidden="false">
		<Size><AbsDimension x="24" y="24"/></Size>
		<Scripts>
			<OnClick>
				MovAny:Nudge(this.dir, arg1)
			</OnClick>
		</Scripts>
	</Button>
	<Button name="MA_MoverButton" inherits="UIPanelButtonTemplate" virtual="true" hidden="false">
		<Size><AbsDimension x="15" y="15"/></Size>
		<Scripts>
			<OnLoad>
				this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
			</OnLoad>
		</Scripts>
	</Button>
	<Button name="MANudger" hidden="true" parent="UIParent" movable="true" toplevel="true" frameStrata="DIALOG">
		<Size>
			<AbsDimension x="200" y="175"/>
		</Size>
		<Anchors>
			<Anchor point="TOP" relativeTo="MAOptions" relativePoint="BOTTOM">
				<Offset><AbsDimension x="0" y="-20"/></Offset>
			</Anchor>
		</Anchors>
		<Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
			<EdgeSize>
				<AbsValue val="4"/>
			</EdgeSize>
			<TileSize>
				<AbsValue val="8"/>
			</TileSize>
			<BackgroundInsets>
				<AbsInset left="2" right="2" top="2" bottom="2"/>
			</BackgroundInsets>
		</Backdrop>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentTitle" inherits="GameFontNormal">
					<Anchors>
						<Anchor point="TOP">
							<Offset><AbsDimension x="0" y="-6"/></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentInfoLabel" inherits="GameFontHighlightSmall">
					<Anchors>
						<Anchor point="TOP">
							<Offset><AbsDimension x="0" y="-36"/></Offset>
						</Anchor>
					</Anchors>
				</FontString>
				<FontString name="$parentMouseOver" inherits="GameFontNormal">
					<Anchors>
						<Anchor point="BOTTOM">
							<Offset><AbsDimension x="0" y="6"/></Offset>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button name="$parent_NudgeUp" inherits="MA_NudgeButton">
				<Anchors>
					<Anchor point="CENTER">
						<Offset><AbsDimension x="0" y="24"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText("^")
						this.dir = 1
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
				</Scripts>
			</Button>
			<Button name="$parent_CenterMe" inherits="UIPanelButtonTemplate" hidden="false">
				<Size><AbsDimension x="24" y="24"/></Size>
				<Anchors>
					<Anchor point="TOP" relativeTo="$parent_NudgeUp" relativePoint="BOTTOM">
						<Offset><AbsDimension x="0" y="2"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText("C")
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
					<OnClick>
						MovAny:Center(0)
					</OnClick>
				</Scripts>
			</Button>
			<Button name="$parent_NudgeDown" inherits="MA_NudgeButton">
				<Anchors>
					<Anchor point="TOP" relativeTo="$parent_CenterMe" relativePoint="BOTTOM">
						<Offset><AbsDimension x="0" y="2"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText("v")
						this.dir = 2
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
				</Scripts>
			</Button>
			<Button name="$parent_NudgeLeft" inherits="MA_NudgeButton">
				<Anchors>
					<Anchor point="RIGHT" relativeTo="$parent_CenterMe" relativePoint="LEFT">
						<Offset><AbsDimension x="0" y="0"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText(MA_LEFTARROW)
						this.dir = 3
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
				</Scripts>
			</Button>
			<Button name="$parent_NudgeRight" inherits="MA_NudgeButton">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent_CenterMe" relativePoint="RIGHT">
						<Offset><AbsDimension x="0" y="0"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText(MA_RIGHTARROW)
						this.dir = 4
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
				</Scripts>
			</Button>
			<Button name="$parent_CenterH" inherits="UIPanelButtonTemplate" hidden="false">
				<Size><AbsDimension x="32" y="24"/></Size>
				<Anchors>
					<Anchor point="RIGHT" relativeTo="$parent_NudgeLeft" relativePoint="LEFT">
						<Offset><AbsDimension x="-10" y="0"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText("C-H")
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
					<OnClick>
						MovAny:Center(1)
					</OnClick>
				</Scripts>
			</Button>
			<Button name="$parent_CenterV" inherits="UIPanelButtonTemplate" hidden="false">
				<Size><AbsDimension x="32" y="24"/></Size>
				<Anchors>
					<Anchor point="TOP" relativeTo="$parent_CenterH" relativePoint="BOTTOM">
						<Offset><AbsDimension x="0" y="2"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						this:SetText("C-V")
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp", "MiddleButtonUp")
					</OnLoad>
					<OnClick>
						MovAny:Center(2)
					</OnClick>
				</Scripts>
			</Button>
			<Button name="$parent_MoverPlus" inherits="MA_MoverButton" text="+">
				<Anchors>
					<Anchor point="TOPRIGHT">
						<Offset><AbsDimension x="-7" y="-7"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						MovAny:Mover(1)
					</OnClick>
				</Scripts>
			</Button>
			<Button name="$parent_MoverMinus" inherits="MA_MoverButton" text="-">
				<Anchors>
					<Anchor point="TOPLEFT">
						<Offset><AbsDimension x="7" y="-7"/></Offset>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						MovAny:Mover(0)
					</OnClick>
				</Scripts>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				this:RegisterForDrag("LeftButton")
				this:SetBackdropColor(0,0,0,0.75)
				this:SetBackdropBorderColor(0,0,0,0.75)
				_G[ this:GetName().."InfoLabel"]:SetAlpha(0.8)
			</OnLoad>
			<OnDragStart>
				this:StartMoving()
			</OnDragStart>
			<OnDragStop>
				this:StopMovingOrSizing()
			</OnDragStop>
			<OnShow>
				MovAny:NudgerOnShow()
			</OnShow>
			<OnHide>
				this:StopMovingOrSizing()
			</OnHide>
			<OnMouseDown>
				if arg1 == "RightButton" then
					this:Hide()
				end
			</OnMouseDown>
			<OnEnter>
				if MovAny.currentMover > 0 and _G[ "MoveAnything"..MovAny.currentMover ].tagged then
					if  (MADB.tooltips and not IsShiftKeyDown()) or (not MADB.tooltips and IsShiftKeyDown()) then
						this.tooltipLines = MovAny:GetFrameTooltipLines(_G[ "MoveAnything"..MovAny.currentMover ].tagged:GetName() )
						MovAny.TooltipShowMultiline(0, this)
					end
				end
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
			</OnLeave>
			<OnUpdate>
				MovAny:NudgerOnUpdate()
			</OnUpdate>
		</Scripts>
	</Button>
</Ui>
